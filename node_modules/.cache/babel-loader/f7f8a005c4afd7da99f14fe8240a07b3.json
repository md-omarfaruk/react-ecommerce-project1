{"ast":null,"code":"import _toConsumableArray from\"D:/Personal/MY DEVELOPMENT/react-ecommerce-project1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Personal/MY DEVELOPMENT/react-ecommerce-project1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import fakeData from'../../fakeData';import{addToDatabaseCart,getDatabaseCart}from'../../utilities/database';import Cart from'../Cart/Cart';import Products from'../Products/Products';import'./Shop.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var sliceFakeData=fakeData.slice(0,10);var _useState=useState(sliceFakeData),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];useEffect(function(){var savedKeys=getDatabaseCart();var productKeys=Object.keys(savedKeys);var previousCart=productKeys.map(function(productKey){var product=fakeData.find(function(pd){return pd.key===productKey;});product.quantity=savedKeys[productKey];return product;});setCart(previousCart);},[]);var handleAddToCart=function handleAddToCart(product){var sameProduct=cart.find(function(pd){return pd.key===product.key;});var count=1;var newCart;if(sameProduct){count=sameProduct.quantity+1;sameProduct.quantity=count;var others=cart.filter(function(pd){return pd.key!==product.key;});newCart=[].concat(_toConsumableArray(others),[sameProduct]);}else{product.quantity=1;newCart=[].concat(_toConsumableArray(cart),[product]);}// const newCart = [...cart, product];\nsetCart(newCart);//     const sameProduct = newCart.filter(pd => pd.key === product.key);\n//     const count = sameProduct.length;\naddToDatabaseCart(product.key,count);};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"products\",children:products.map(function(product){return/*#__PURE__*/_jsx(Products,{showAddToCart:true,handleAddToCart:handleAddToCart,products:product},product.key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,children:/*#__PURE__*/_jsx(Link,{to:\"/review\",children:/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart\",children:\"Review Order\"})})})})]});};export default Shop;","map":{"version":3,"sources":["D:/Personal/MY DEVELOPMENT/react-ecommerce-project1/src/components/Shop/Shop.js"],"names":["React","useState","useEffect","fakeData","addToDatabaseCart","getDatabaseCart","Cart","Products","Link","Shop","sliceFakeData","slice","products","setProducts","cart","setCart","savedKeys","productKeys","Object","keys","previousCart","map","productKey","product","find","pd","key","quantity","handleAddToCart","sameProduct","count","newCart","others","filter"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport fakeData from '../../fakeData';\r\nimport { addToDatabaseCart, getDatabaseCart } from '../../utilities/database';\r\nimport Cart from '../Cart/Cart';\r\nimport Products from '../Products/Products';\r\nimport './Shop.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst Shop = () => {\r\n    const sliceFakeData = fakeData.slice(0, 10);\r\n    const [products, setProducts] = useState(sliceFakeData);\r\n\r\n    const [cart, setCart] = useState([])\r\n\r\n    useEffect(()=>{\r\n                const savedKeys = getDatabaseCart();\r\n                const productKeys = Object.keys(savedKeys);\r\n                const previousCart = productKeys.map(productKey =>{\r\n                    const product = fakeData.find(pd => pd.key === productKey);\r\n                        product.quantity = savedKeys[productKey];\r\n                        return product;\r\n                })\r\n                setCart(previousCart);\r\n    },[])\r\n\r\n            const handleAddToCart = (product) => { \r\n                \r\n                const sameProduct = cart.find(pd => pd.key === product.key);\r\n                let count = 1;\r\n                let newCart;\r\n                    if(sameProduct){\r\n                            count = sameProduct.quantity + 1;\r\n                            sameProduct.quantity = count;\r\n                        const others = cart.filter(pd => pd.key !== product.key);\r\n                            newCart = [...others, sameProduct];       \r\n                    }\r\n                    else{\r\n                        product.quantity = 1;\r\n                          newCart = [...cart, product];  \r\n                    }\r\n\r\n                // const newCart = [...cart, product];\r\n                    setCart(newCart)\r\n\r\n                //     const sameProduct = newCart.filter(pd => pd.key === product.key);\r\n                //     const count = sameProduct.length;\r\n                    addToDatabaseCart(product.key, count)\r\n            }\r\n\r\n\r\n    return (\r\n        <div className='shop-container'>\r\n            <div className='products'>\r\n            {\r\n                products.map(product => <Products showAddToCart={true} handleAddToCart = {handleAddToCart} products = {product} key= {product.key}></Products>)\r\n            }\r\n        </div>\r\n\r\n        <div className='cart'>\r\n            <Cart cart= {cart}>\r\n                <Link to=\"/review\"><button className=\"add-to-cart\">Review Order</button></Link>\r\n            </Cart>\r\n        </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}