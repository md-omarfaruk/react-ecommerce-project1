{"ast":null,"code":"var getUser=function getUser(){var existingUser=sessionStorage.getItem('userId');if(existingUser){return existingUser;}else{var newUser='user-'+new Date().getTime();sessionStorage.setItem('userId',newUser);return newUser;}};var getDataKey=function getDataKey(){var userId=getUser();return\"emaJohn/carts/\".concat(userId);};// push to local storage: a temporary place for database\nvar getDatabaseCart=function getDatabaseCart(){var dataKey=getDataKey();var data=localStorage.getItem(dataKey)||\"{}\";return JSON.parse(data);};var addToDatabaseCart=function addToDatabaseCart(key,count){var currentCart=getDatabaseCart();currentCart[key]=count;localStorage.setItem(getDataKey(),JSON.stringify(currentCart));};var removeFromDatabaseCart=function removeFromDatabaseCart(key){var currentCart=getDatabaseCart();delete currentCart[key];localStorage.setItem(getDataKey(),JSON.stringify(currentCart));};var processOrder=function processOrder(cart){localStorage.removeItem(getDataKey());};export{addToDatabaseCart,getDatabaseCart,removeFromDatabaseCart,processOrder};// polyfill to support older browser\nvar localStorage=window.localStorage||function(){var store={};return{getItem:function getItem(key){return store[key];},setItem:function setItem(key,value){store[key]=value.toString();},clear:function clear(){store={};}};}();var sessionStorage=window.sessionStorage||function(){var store={};return{getItem:function getItem(key){return store[key];},setItem:function setItem(key,value){store[key]=value.toString();},clear:function clear(){store={};}};}();// end of poly fill","map":{"version":3,"sources":["D:/Personal/MY DEVELOPMENT/react-first-project/src/utilities/database.js"],"names":["getUser","existingUser","sessionStorage","getItem","newUser","Date","getTime","setItem","getDataKey","userId","getDatabaseCart","dataKey","data","localStorage","JSON","parse","addToDatabaseCart","key","count","currentCart","stringify","removeFromDatabaseCart","processOrder","cart","removeItem","window","store","value","toString","clear"],"mappings":"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","sourcesContent":["const getUser = () => {\r\n    const existingUser = sessionStorage.getItem('userId');\r\n    if (existingUser) {\r\n        return existingUser; \r\n    } else {\r\n        const newUser = 'user-' + new Date().getTime();\r\n        sessionStorage.setItem('userId', newUser)\r\n        return newUser;\r\n    }\r\n  }\r\n  \r\n  const getDataKey = () => {\r\n    const userId = getUser();\r\n    return `emaJohn/carts/${userId}`\r\n  }\r\n  \r\n  // push to local storage: a temporary place for database\r\n  const getDatabaseCart = () => {\r\n    const dataKey = getDataKey();\r\n    const data = localStorage.getItem(dataKey) || \"{}\";\r\n    return JSON.parse(data);\r\n  }\r\n  \r\n  const addToDatabaseCart = (key, count) => {\r\n    const currentCart = getDatabaseCart();\r\n    currentCart[key] = count;\r\n    localStorage.setItem(getDataKey(), JSON.stringify(currentCart));\r\n  }\r\n  \r\n  const removeFromDatabaseCart = key => {\r\n    const currentCart = getDatabaseCart();\r\n    delete currentCart[key];\r\n    localStorage.setItem(getDataKey(), JSON.stringify(currentCart));\r\n  }\r\n  \r\n  const processOrder = (cart) => {\r\n    localStorage.removeItem(getDataKey());\r\n  }\r\n  \r\n  \r\n  export { addToDatabaseCart, getDatabaseCart, removeFromDatabaseCart, processOrder };\r\n  \r\n  \r\n  // polyfill to support older browser\r\n  const localStorage = window.localStorage || (() => {\r\n  let store = {}\r\n  return {\r\n    getItem(key) {\r\n      return store[key]\r\n    },\r\n    setItem(key, value) {\r\n      store[key] = value.toString()\r\n    },\r\n    clear() {\r\n      store = {}\r\n    }\r\n  };\r\n  })()\r\n  \r\n  const sessionStorage = window.sessionStorage || (() => {\r\n  let store = {}\r\n  return {\r\n    getItem(key) {\r\n      return store[key]\r\n    },\r\n    setItem(key, value) {\r\n      store[key] = value.toString()\r\n    },\r\n    clear() {\r\n      store = {}\r\n    }\r\n  };\r\n  })()\r\n  // end of poly fill"]},"metadata":{},"sourceType":"module"}